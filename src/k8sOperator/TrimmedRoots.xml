<linker>
  <assembly fullname="k8sOperator" preserve="all">
    <!-- Preserve all command types for reflection -->
    <type fullname="k8s.Operator.Host.Commands.*" preserve="all" />
    <type fullname="k8s.Operator.Host.IOperatorCommand" preserve="all" />
    <type fullname="k8s.Operator.Host.OperatorArgumentAttribute" preserve="all" />
    
    <!-- Preserve attributes used for CRD schema generation -->
    <type fullname="k8s.Operator.Generation.Attributes.PatternAttribute" preserve="all" />
    <type fullname="k8s.Operator.Generation.Attributes.DefaultAttribute" preserve="all" />
    
    <!-- Preserve KubernetesEntityAttribute used by informers -->
    <type fullname="k8s.KubernetesEntityAttribute" preserve="all" />
    
    <!-- Preserve leader election service types for dynamic instantiation -->
    <type fullname="k8s.Operator.Leader.LeaderElectionService" preserve="all" />
    <type fullname="k8s.Operator.Leader.NoopLeaderElectionService" preserve="all" />
    <type fullname="k8s.Operator.Leader.NeverLeaderElectionService" preserve="all" />
    
    <!-- Preserve OperatorController for dynamic instantiation -->
    <type fullname="k8s.Operator.Controller.OperatorController`1" preserve="all" />
    
    <!-- Preserve assembly metadata attributes -->
    <type fullname="k8s.Operator.Metadata.OperatorNameAttribute" preserve="all" />
    <type fullname="k8s.Operator.Metadata.NamespaceAttribute" preserve="all" />
    <type fullname="k8s.Operator.Metadata.DockerImageAttribute" preserve="all" />
  </assembly>
</linker>
